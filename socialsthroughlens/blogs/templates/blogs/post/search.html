{% extends 'blogs/base.html' %}
{% load blog_tags %}

{% block title %}Search{% endblock %}

{% block content %}
<div class='search_page'>
    {% if query %}
    <h1>Post Containing "{{query}}"</h1>
    <h3>
        {% with result.count as total_result %}
        Found {{total_result}} result{{total_result|pluralize}}
        {% endwith %}
    </h3>
    {% for post in result %}
    <h4>
        <a href="{{post.get_absolute_url}}">
            {{post.title}}
        </a>
    </h4>
    {{post.body|markdown|truncatechars_html:40}}
    <h4>---------------------------------------------------------</h4>
    {% empty %}
        <p>There are no results for your query </p>
    {% endfor %}
    <p><a href="{% url 'blogs:post_search' %}">Search again</a></p>
    {% else %}
        <h1>Seach for Posts</h1>
        <form method="get">
            {{form.as_p}}
            <input type="submit" value='Search' class='button'>
        </form>
    {% endif %}
</div>
{% endblock %}